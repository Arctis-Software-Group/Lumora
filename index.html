<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Lumora</title>
    <meta name="description" content="Lumora - High-performance AI at a low cost" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap" rel="stylesheet" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="stylesheet" href="./src/styles/tokens.css" />
    <link rel="stylesheet" href="./src/styles/theme.css" />
    <link rel="stylesheet" href="./src/styles/layout.css" />
    <link rel="stylesheet" href="./src/styles/app.css" />
    <link rel="stylesheet" href="./src/styles/chat.css" />
    <link rel="stylesheet" href="./src/styles/glass.css" />
    <link rel="stylesheet" href="./src/styles/simple.css" />
    <link rel="stylesheet" href="./src/styles/fii.css" />
    <!-- Revamp overrides (loaded last) -->
    <link rel="stylesheet" href="./src/styles/revamp.css" />
    <link rel="stylesheet" href="./src/ui/rvi/style.css" />
    <link rel="stylesheet" href="./src/ui/rvi/themes/liquid-glass.css" />
  </head>
  <body>
    <a href="#input" class="skip-link">„É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Å∏„Çπ„Ç≠„ÉÉ„Éó</a>
    <div id="bg-gradient" aria-hidden="true"></div>

    <header class="topbar" role="banner">
      <div class="topbar-inner">
        <div class="topbar-left">
          <button id="mobileMenuBtn" class="icon-btn mobile-only" aria-label="„É°„Éã„É•„Éº" aria-controls="sidebar" aria-expanded="false" title="„É°„Éã„É•„Éº">‚ò∞</button>
          <div class="brand-block" aria-label="Lumora „Éõ„Éº„É†">
            <div class="brand">Lumora</div>
            <div class="brand-tagline">Thoughtful AI workspace</div>
          </div>
        </div>
        <div class="topbar-right">
            <div class="controls">
              <div id="modelSelectorContainer" class="model-selector-container"><!-- JS „ÅßÊåøÂÖ• --></div>
              <div id="toneBadge" class="plan-badge" aria-live="polite" style="display:none;">Tone: Neutral</div>
              <div id="studyBadge" class="plan-badge" aria-live="polite" style="display:none;">Study Mode</div>
              <div id="medicalBadge" class="plan-badge" aria-live="polite" style="display:none;">Medical Mode</div>
              <div id="evoIndicator" class="plan-badge evo-indicator" aria-live="polite" style="display:none;" title="ÈÄ≤Âåñ„É≠„Ç∞„ÇíË°®Á§∫/ÈùûË°®Á§∫">ÈÄ≤Âåñ‰∏≠‚Ä¶ (0/0)</div>
            </div>
        </div>
      </div>
    </header>

    <div id="fiiRoot" class="fii-root" aria-label="Fluid Intelligence Interface"></div>
    <div class="container">
      <aside id="sidebar" class="sidebar" aria-label="‰ºöË©±„ÅÆÂ±•Ê≠¥„Å®„Éó„É≠„Ç∏„Çß„ÇØ„Éà">
        <div class="sidebar-header">
          <section class="sidebar-section is-actions">
            <div class="sidebar-section-header">
              <span class="sidebar-heading">Workspace</span>
              <div class="sidebar-buttons">
                <button id="toggleSidebarBtn" class="icon-btn" title="„Çµ„Ç§„Éâ„Éê„Éº„ÇíÊäò„Çä„Åü„Åü„ÇÄ" aria-label="„Çµ„Ç§„Éâ„Éê„Éº„ÇíÊäò„Çä„Åü„Åü„ÇÄ">
                  <span class="chev">‚ü∑</span>
                </button>
                <button id="newChatBtn" class="primary-btn">Ôºã Êñ∞„Åó„ÅÑ„ÉÅ„É£„ÉÉ„Éà</button>
              </div>
            </div>
          </section>
          <section class="sidebar-section">
            <div class="sidebar-section-header">
              <span class="sidebar-heading">„Éó„É≠„Ç∏„Çß„ÇØ„Éà</span>
            </div>
            <div id="projectNav" class="project-nav"><!-- JS „ÅßÊåøÂÖ• --></div>
          </section>
          <section class="sidebar-section">
            <div class="sidebar-section-header">
              <span class="sidebar-heading">AI Tools</span>
            </div>
            <div class="ai-tools-nav">
              <a href="./agent.html" class="ai-tool-link" title="Lumora Agent - Ëá™ÂæãÂûã„Çø„Çπ„ÇØÈÅÇË°åAI">
                <span class="ai-tool-icon">üß†</span>
                <span class="ai-tool-name">Agent</span>
                <span class="ai-tool-badge">Beta</span>
              </a>
            </div>
          </section>
          <section class="sidebar-section">
        </div>
        <div class="sidebar-scroll">
          <nav id="chatList" class="chat-list" aria-label="Â±•Ê≠¥‰∏ÄË¶ß">
            <!-- JS„ÅßÊåøÂÖ• -->
          </nav>
        </div>
        <div class="sidebar-footer">
          <div id="userProfile" class="user-profile" aria-label="„É¶„Éº„Ç∂„Éº„Éó„É≠„Éï„Ç£„Éº„É´">
            <div class="avatar-wrap">
              <img id="userAvatar" alt="„É¶„Éº„Ç∂„ÉºÁîªÂÉè" />
              <div id="userAvatarFallback" class="avatar-fallback">U</div>
            </div>
            <div class="user-meta">
              <div id="userNameDisplay" class="user-name">„É¶„Éº„Ç∂„Éº</div>
              <div id="planBadge" class="plan-badge" aria-live="polite">Free</div>
            </div>
          </div>
          <button id="settingsBtn" class="icon-btn" title="Ë®≠ÂÆö" aria-label="Ë®≠ÂÆö">
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12 8.5A3.5 3.5 0 1 0 12 15.5 3.5 3.5 0 1 0 12 8.5zm8.94 2.56-.99-.57.02-.13a7.9 7.9 0 0 0-.5-1.2l.74-.9a.75.75 0 0 0-.06-.98l-1.07-1.07a.75.75 0 0 0-.98-.06l-.9.74c-.39-.22-.79-.39-1.2-.5l-.13-.02-.57-.99A.75.75 0 0 0 14.5 4h-1.5a.75.75 0 0 0-.66.38l-.57.99-.13.02c-.42.1-.82.28-1.21.5l-.9-.74a.75.75 0 0 0-.98.06L7.48 6.28a.75.75 0 0 0-.06.98l.74.9c-.22.39-.39.79-.5 1.2l-.02.13-.99.57A.75.75 0 0 0 6 11.5v1a.75.75 0 0 0 .38.66l.99.57.02.13c.1.42.28.82.5 1.21l-.74.9a.75.75 0 0 0 .06.98l1.07 1.07c.26.26.67.29.98.06l.9-.74c.39.22.79.39 1.2.5l.13.02.57.99c.13.23.37.38.64.38h1.5c.27 0 .51-.15.64-.38l.57-.99.13-.02c.42-.1.82-.28 1.21-.5l.9.74c.31.23.72.2.98-.06l1.07-1.07c.26-.26.29-.67.06-.98l-.74-.9c.22-.39.39-.79.5-1.2l.02-.13.99-.57c.23-.13.38-.37.38-.64v-1c0-.27-.15-.51-.38-.64z"/></svg>
          </button>
        </div>
      </aside>

      <main id="app" class="app" role="main" aria-live="polite">
        <section id="emptyState" class="empty-state" aria-label="Á©∫„ÅÆÁä∂ÊÖã">
          <div class="hero-frame">
            <div class="hero-main">
              <div class="hero-greeting">
                <h1>Hello I‚Äôm Lumora.</h1>
                <p>Is there anything I can help you with?</p>
              </div>
              <div class="hero-input" role="search">
                <div class="hero-menu-wrap">
                  <button id="newChatHero" class="sb-btn" title="Êñ∞„Åó„ÅÑ„ÉÅ„É£„ÉÉ„Éà" aria-label="Êñ∞„Åó„ÅÑ„ÉÅ„É£„ÉÉ„Éà">Ôºã</button>
                  <div id="heroMenu" class="hero-menu" hidden>
                    <button id="attachBtn" class="menu-item" aria-label="ÂÜôÁúü„Å®„Éï„Ç°„Ç§„É´„ÇíËøΩÂä†">üìé ÂÜôÁúü„Å®„Éï„Ç°„Ç§„É´„ÇíËøΩÂä†</button>
                    <button id="thinkMoreBtn" class="menu-item" aria-label="„Çà„ÇäÈï∑„ÅèÊÄùËÄÉ„Åô„Çã">üí° „Çà„ÇäÈï∑„ÅèÊÄùËÄÉ„Åô„Çã</button>
                    <button id="studyModeBtn" class="menu-item" aria-label="Study Mode „ÇíÂàá„ÇäÊõø„Åà" aria-pressed="false">üìö Study Mode „Çí„Ç™„É≥</button>
                    <button id="medicalModeBtn" class="menu-item" aria-label="Medical Mode „ÇíÂàá„ÇäÊõø„Åà" aria-pressed="false">ü©∫ Medical Mode „Çí„Ç™„É≥</button>
                    <div class="menu-sep"></div>
                    <button id="reasoningBtn" class="menu-item has-sub" aria-haspopup="true" aria-expanded="false">‚ãØ ÊÄùËÄÉÂäõ„ÇíË®≠ÂÆö„Åô„Çã ‚ñ∏</button>
                    <div id="reasoningSub" class="submenu" hidden>
                      <button class="sub-item" data-effort="high">High</button>
                      <button class="sub-item" data-effort="medium">Medium</button>
                      <button class="sub-item" data-effort="low">Low</button>
                    </div>
                  </div>
                </div>
                <div id="heroPreview" class="attach-preview" hidden></div>
                <input id="heroInput" type="text" placeholder="„Ç¢„Ç§„Éá„Ç¢„ÇÑË™≤È°å„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" aria-label="„Ç¢„Ç§„Éá„Ç¢„ÇÑË™≤È°å„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" />
                <button id="heroMic" class="sb-icon" title="Èü≥Â£∞ÂÖ•Âäõ" aria-label="Èü≥Â£∞ÂÖ•Âäõ">
                  <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M12 14a3 3 0 0 0 3-3V7a3 3 0 0 0-6 0v4a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2zM11 19h2v3h-2z"/></svg>
                </button>
                <button id="heroSend" class="sb-send" title="ÈÄÅ‰ø°" aria-label="ÈÄÅ‰ø°">
                  <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg>
                </button>
              </div>
              <div class="hero-hints" aria-label="„Çπ„Çø„Éº„Çø„Éº„Éí„É≥„Éà">
                <button class="hero-hint purpose-chip" data-suggest="„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ„Ç¥„Éº„É´: \nËÉåÊôØ: \nÂà∂Á¥Ñ: \n\n‰∏äË®ò„Çí„ÇÇ„Å®„Å´„ÄÅÊ¨°„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÊÆµÈöéÁöÑ„Å´ÊèêÊ°à„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" title="Êà¶Áï•„Çª„ÉÉ„Ç∑„Éß„É≥">üß† Êà¶Áï•„Çª„ÉÉ„Ç∑„Éß„É≥</button>
                <button class="hero-hint purpose-chip" data-suggest="„Éñ„É©„É≥„Éâ/„Çµ„Éº„Éì„Çπ: \n‰ºù„Åà„Åü„ÅÑ‰æ°ÂÄ§: \nÊÉ≥ÂÆöË™≠ËÄÖ: \n\n„Éà„Éº„É≥Âà•„Å´3„Å§„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏Ê°à„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" title="„Éñ„É©„É≥„Éâ„É°„ÉÉ„Çª„Éº„Ç∏">üé® „Éñ„É©„É≥„Éâ„É°„ÉÉ„Çª„Éº„Ç∏</button>
                <button class="hero-hint purpose-chip" data-suggest="‰øÆÊ≠£„Åó„Åü„ÅÑ„Ç≥„Éº„Éâ:\n```lang\n// „Åì„Åì„Å´„Ç≥„Éº„Éâ\n```\n„Ç®„É©„Éº„ÇÑÊîπÂñÑ„Åó„Åü„ÅÑÁÇπ:\n\nË™≠„Åø„ÇÑ„Åô„ÅÑ„É™„Éï„Ç°„ÇØ„ÇøÊ°à„Å®ÁêÜÁî±„ÇíÁ§∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" title="„Ç≥„Éº„Éâ„Ç¢„Ç∑„Çπ„Éà">‚ö°Ô∏è „Ç≥„Éº„Éâ„Ç¢„Ç∑„Çπ„Éà</button>
              </div>
              <div class="hero-info-grid" aria-label="Lumora tips">
                <div class="hero-card gradient">
                  <h3>„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà</h3>
                  <p>‚åòK „Åß„Ç≥„Éû„É≥„Éâ„Éë„É¨„ÉÉ„Éà„ÇíÈñã„Åç„ÄÅ„ÉÅ„É£„ÉÉ„ÉàÊ§úÁ¥¢„Éª„É¢„Éá„É´Âàá„ÇäÊõø„Åà„ÉªË®≠ÂÆö„Å´‰∏ÄÁû¨„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Åæ„Åô„ÄÇ</p>
                  <div class="hero-shortcuts">
                    <span class="shortcut-pill">‚åòB „Çµ„Ç§„Éâ„Éê„Éº</span>
                    <span class="shortcut-pill">‚åòJ ÂÖ•ÂäõÊ¨Ñ</span>
                    <span class="shortcut-pill">‚åòN Êñ∞Ë¶è„ÉÅ„É£„ÉÉ„Éà</span>
                  </div>
                </div>
                <div class="hero-card board">
                  <h3>‰∫∫Ê∞ó„ÅÆ„Éñ„É´„Éº„Éó„É™„É≥„Éà</h3>
                  <div class="hero-blueprints">
                    <button class="hero-card-btn purpose-chip" data-suggest="„É™„Çµ„Éº„ÉÅÂØæË±°: \nÁü•„Çä„Åü„ÅÑ„Åì„Å®: \n\n‰ø°È†º„Åß„Åç„ÇãÊÉÖÂ†±Ê∫ê„ÇíÂºïÁî®„Åó„Å™„Åå„ÇâË¶ÅÁÇπ„Å®Ê¨°„ÅÆÊâì„Å°Êâã„Çí„Åæ„Å®„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" title="„É™„Çµ„Éº„ÉÅË¶ÅÁ¥Ñ">üß≠ „É™„Çµ„Éº„ÉÅË¶ÅÁ¥Ñ</button>
                    <button class="hero-card-btn purpose-chip" data-suggest="„É≠„Éº„É≥„ÉÅ„Åô„ÇãË£ΩÂìÅ/„Çµ„Éº„Éì„Çπ: \n„Çø„Éº„Ç≤„ÉÉ„Éà: \nÊôÇÊúü: \n\nSNS„Éª„É°„Éº„É´„ÉªLPÂêë„Åë„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„Çí3„Éë„Çø„Éº„É≥ÊèêÊ°à„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" title="„É≠„Éº„É≥„ÉÅË®àÁîª">üöÄ „É≠„Éº„É≥„ÉÅË®àÁîª</button>
                    <button class="hero-card-btn purpose-chip" data-suggest="ÊîπÂñÑ„Åó„Åü„ÅÑ„Éó„É≠„Çª„Çπ: \nÁèæÁä∂„ÅÆË™≤È°å: \nÂà∂Á¥Ñ: \n\nÊîπÂñÑÊ°à„ÇíÂÑ™ÂÖàÂ∫¶È†Ü„Å´Á§∫„Åó„ÄÅÊúüÂæÖ„Åï„Çå„ÇãÂäπÊûú„ÇíÁÆáÊù°Êõ∏„Åç„Åß„Åæ„Å®„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" title="ÊîπÂñÑ„Éñ„É™„Éº„Éï">üõ†Ô∏è ÊîπÂñÑ„Éñ„É™„Éº„Éï</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="messages" class="messages" aria-label="„É°„ÉÉ„Çª„Éº„Ç∏‰∏ÄË¶ß">
          <!-- JS„Åß„Éê„Éñ„É´„ÇíËøΩÂä† -->
        </section>
        
        <button id="scrollBottomBtn" class="scroll-bottom" title="‰∏ÄÁï™‰∏ã„Å∏" aria-label="‰∏ÄÁï™‰∏ã„Å∏">‚Üì</button>
        <!-- Bookmark Bubble: ÁèæÂú®„ÅÆ„ÉÅ„É£„ÉÉ„Éà„Çí„ÅäÊ∞ó„Å´ÂÖ•„Çä„Å´ËøΩÂä†/Ëß£Èô§ -->
        <button id="bookmarkBubble" class="bookmark-bubble" title="„Åì„ÅÆ„ÉÅ„É£„ÉÉ„Éà„Çí„ÅäÊ∞ó„Å´ÂÖ•„Çä" aria-label="„Åì„ÅÆ„ÉÅ„É£„ÉÉ„Éà„Çí„ÅäÊ∞ó„Å´ÂÖ•„Çä" hidden>‚òÜ</button>

        <footer id="composer" class="composer" aria-label="„É°„ÉÉ„Çª„Éº„Ç∏‰ΩúÊàêÊ¨Ñ" style="display:none;">
          <!-- Ê∑ª‰ªò„Éó„É¨„Éì„É•„ÉºÔºà‰ºöË©±‰∏≠Ôºâ -->
          <div id="composerPreview" class="composer-attach-bar" hidden></div>
          <!-- „É°„Éã„É•„ÉºÔºàÔºãÔºâ -->
          <div class="composer-menu-wrap">
            <button id="composerPlus" class="icon-btn" title="„ÉÑ„Éº„É´" aria-label="„ÉÑ„Éº„É´">Ôºã</button>
            <div id="composerMenu" class="hero-menu" hidden>
              <button id="composerAttachBtn" class="menu-item" aria-label="ÂÜôÁúü„Å®„Éï„Ç°„Ç§„É´„ÇíËøΩÂä†">üìé ÂÜôÁúü„Å®„Éï„Ç°„Ç§„É´„ÇíËøΩÂä†</button>
              <button id="composerThinkMoreBtn" class="menu-item" aria-label="„Çà„ÇäÈï∑„ÅèÊÄùËÄÉ„Åô„Çã">üí° „Çà„ÇäÈï∑„ÅèÊÄùËÄÉ„Åô„Çã</button>
              <button id="composerStudyModeBtn" class="menu-item" aria-label="Study Mode „ÇíÂàá„ÇäÊõø„Åà" aria-pressed="false">üìö Study Mode „Çí„Ç™„É≥</button>
              <button id="composerMedicalModeBtn" class="menu-item" aria-label="Medical Mode „ÇíÂàá„ÇäÊõø„Åà" aria-pressed="false">ü©∫ Medical Mode „Çí„Ç™„É≥</button>
              <div class="menu-sep"></div>
              <button id="composerReasoningBtn" class="menu-item has-sub" aria-haspopup="true" aria-expanded="false">‚ãØ ÊÄùËÄÉÂäõ„ÇíË®≠ÂÆö„Åô„Çã ‚ñ∏</button>
              <div id="composerReasoningSub" class="submenu" hidden>
                <button class="sub-item" data-effort="high">High</button>
                <button class="sub-item" data-effort="medium">Medium</button>
                <button class="sub-item" data-effort="low">Low</button>
              </div>
              <div class="menu-sep"></div>
              <button id="compTplSummarize" class="menu-item" aria-label="„ÉÜ„É≥„Éó„É¨: Ë¶ÅÁ¥Ñ">üßæ „ÉÜ„É≥„Éó„É¨: Ë¶ÅÁ¥Ñ</button>
              <button id="compTplTranslate" class="menu-item" aria-label="„ÉÜ„É≥„Éó„É¨: ÁøªË®≥">üåê „ÉÜ„É≥„Éó„É¨: ÁøªË®≥</button>
              <button id="compTplExplain" class="menu-item" aria-label="„ÉÜ„É≥„Éó„É¨: Ëß£Ë™¨">üìò „ÉÜ„É≥„Éó„É¨: Ëß£Ë™¨</button>
              <button id="compTplPrompt" class="menu-item" aria-label="„ÉÜ„É≥„Éó„É¨: „Éó„É≠„É≥„Éó„Éà‰ΩúÊàê">üí° „ÉÜ„É≥„Éó„É¨: „Éó„É≠„É≥„Éó„Éà</button>
              <div class="menu-sep"></div>
              <div class="menu-heading">Lumora Canvas‚Ñ¢</div>
              <label class="menu-check">
                <input type="checkbox" id="canvasEnableToggle" />
                <span>Canvas Ê©üËÉΩ„ÇíÊúâÂäπ„Å´„Åô„Çã</span>
              </label>
              <div class="menu-radio-group" id="canvasModeOptions">
                <label><input type="radio" name="canvasMode" value="auto" /> Ëá™ÂãïË°®Á§∫</label>
                <label><input type="radio" name="canvasMode" value="manual" /> ÊâãÂãïË°®Á§∫</label>
                <label><input type="radio" name="canvasMode" value="off" /> ÁÑ°ÂäπÂåñ</label>
              </div>
            </div>
          </div>
          <textarea id="input" rows="1" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•ÂäõÔºàEnter„ÅßÈÄÅ‰ø° / Shift+Enter„ÅßÊîπË°åÔºâ" aria-label="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ"></textarea>
          <div class="composer-actions">
            <button id="evoToggleBtn" class="icon-btn evo-toggle" title="ÈÄ≤Âåñ„É´„Éº„Éó ON/OFF" aria-pressed="true">üîÑ ÈÄ≤Âåñ</button>
            <div id="charCount" class="char-count" aria-live="polite">0</div>
            <button id="micBtn" class="icon-btn" title="Èü≥Â£∞ÂÖ•Âäõ" aria-label="Èü≥Â£∞ÂÖ•Âäõ" aria-pressed="false">
              <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12 14a3 3 0 0 0 3-3V7a3 3 0 0 0-6 0v4a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2zM11 19h2v3h-2z"/></svg>
            </button>
            <div id="micIndicator" class="mic-indicator" aria-live="assertive" hidden>
              <span class="dot"></span><span class="bars"></span><span class="label">Èå≤Èü≥‰∏≠‚Ä¶</span>
            </div>
            <button id="sendBtn" class="send-btn" title="ÈÄÅ‰ø°" aria-label="ÈÄÅ‰ø°">‚Üë</button>
          </div>
        </footer>
      </main>
    </div>

    <footer class="legal">
      <a href="./terms.html" target="_blank" rel="noopener">Âà©Áî®Ë¶èÁ¥Ñ</a>
      <span>¬∑</span>
      <a href="./privacy.html" target="_blank" rel="noopener">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
      <span>¬∑</span>
      <a href="./fup.html" target="_blank" rel="noopener">ÂÖ¨Ê≠£Âà©Áî®„Éù„É™„Ç∑„Éº</a>
    </footer>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <div id="canvasBackdrop" class="canvas-backdrop" hidden></div>
    <aside id="canvasPanel" class="canvas-panel" hidden aria-label="Lumora Canvas">
      <div class="canvas-header">
        <div class="canvas-title-wrap">
          <span class="canvas-title">Lumora Canvas‚Ñ¢</span>
          <span id="canvasMeta" class="canvas-meta">HTML</span>
        </div>
        <div class="canvas-header-actions">
          <button id="canvasDownloadBtn" class="canvas-btn" type="button" title="„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ">üíæ</button>
          <button id="canvasCloseBtn" class="canvas-btn" type="button" title="Èñâ„Åò„Çã">‚úï</button>
        </div>
      </div>
      <div class="canvas-body">
        <div class="canvas-pane editor">
          <div class="canvas-pane-header">
            <span>Á∑®ÈõÜ</span>
            <button id="canvasCopyBtn" class="canvas-link" type="button">„Ç≥„Éî„Éº</button>
          </div>
          <textarea id="canvasEditor" spellcheck="false" aria-label="Canvas Editor"></textarea>
        </div>
        <div class="canvas-pane preview">
          <div class="canvas-pane-header">
            <span id="canvasPreviewLabel">„Éó„É¨„Éì„É•„Éº</span>
          </div>
          <div id="canvasPreviewArea" class="canvas-preview-area" role="presentation"></div>
        </div>
      </div>
    </aside>

    <!-- Evolution Log Panel (right side) -->
    <aside id="evoLogPanel" class="evo-log-panel" hidden>
      <div id="evoResizer" class="evo-resizer" role="separator" aria-label="ÈÄ≤Âåñ„É≠„Ç∞„ÅÆÂπÖ„ÇíÂ§âÊõ¥" tabindex="0"></div>
      <div class="evo-log-header">
        <div class="title"><span class="dot"></span><span>ÈÄ≤Âåñ„É≠„Ç∞</span><span class="subtitle">ÊîπËâØ„ÅÆÈÅéÁ®ã„ÇíÂèØË¶ñÂåñ</span></div>
        <div class="right"><span class="stat">Áä∂ÊÖã: <strong id="evoStatus">ÂæÖÊ©ü</strong></span><span id="evoModeChip" class="chip">ÈÄ≤Âåñ</span><button id="evoLogClose" class="evo-log-close" title="Èñâ„Åò„Çã">‚úï</button></div>
      </div>
      <div id="evoLogBody" class="evo-log-body" aria-live="polite"></div>
    </aside>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="modal-content enhanced-modal">
        <header class="modal-header enhanced-header">
          <div class="header-content">
            <div class="header-icon">
              <svg viewBox="0 0 24 24" width="24" height="24">
                <path fill="currentColor" d="M12 8.5A3.5 3.5 0 1 0 12 15.5 3.5 3.5 0 1 0 12 8.5zm8.94 2.56-.99-.57.02-.13a7.9 7.9 0 0 0-.5-1.2l.74-.9a.75.75 0 0 0-.06-.98l-1.07-1.07a.75.75 0 0 0-.98-.06l-.9.74c-.39-.22-.79-.39-1.2-.5l-.13-.02-.57-.99A.75.75 0 0 0 14.5 4h-1.5a.75.75 0 0 0-.66.38l-.57.99-.13.02c-.42.1-.82.28-1.21.5l-.9-.74a.75.75 0 0 0-.98.06L7.48 6.28a.75.75 0 0 0-.06.98l.74.9c-.22.39-.39.79-.5 1.2l-.02.13-.99.57A.75.75 0 0 0 6 11.5v1a.75.75 0 0 0 .38.66l.99.57.02.13c.1.42.28.82.5 1.21l-.74.9a.75.75 0 0 0 .06.98l1.07 1.07c.26.26.67.29.98.06l.9-.74c.39.22.79.39 1.2.5l.13.02.57.99c.13.23.37.38.64.38h1.5c.27 0 .51-.15.64-.38l.57-.99.13-.02c.42-.1.82-.28 1.21-.5l.9.74c.31.23.72.2.98-.06l1.07-1.07c.26-.26.29-.67.06-.98l-.74-.9c.22-.39.39-.79.5-1.2l.02-.13.99-.57c.23-.13.38-.37.38-.64v-1c0-.27-.15-.51-.38-.64z"/>
              </svg>
            </div>
            <div class="header-text">
              <h2 id="settingsTitle">Ë®≠ÂÆö</h2>
              <p class="header-subtitle">„Ç¢„Éó„É™„ÅÆË°®Á§∫„Å®Âãï‰Ωú„Çí„Ç´„Çπ„Çø„Éû„Ç§„Ç∫</p>
            </div>
          </div>
          <button id="settingsClose" class="enhanced-close-btn" aria-label="Èñâ„Åò„Çã">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </header>
        
        <div class="modal-body enhanced-body">
          <!-- Settings Tabs Navigation -->
          <nav class="settings-tabs" role="tablist" aria-label="Ë®≠ÂÆö„Ç´„ÉÜ„Ç¥„É™">
            <button class="tab-btn" id="tab-safety" role="tab" aria-selected="true" aria-controls="settings-safety">„Çª„Éº„Éï„ÉÜ„Ç£/„Éà„Éº„É≥</button>
            <button class="tab-btn" id="tab-appearance" role="tab" aria-selected="false" aria-controls="settings-appearance">Â§ñË¶≥</button>
            <button class="tab-btn" id="tab-experiments" role="tab" aria-selected="false" aria-controls="settings-experiments">ÂÆüÈ®ì</button>
            <button class="tab-btn" id="tab-pro" role="tab" aria-selected="false" aria-controls="settings-pro">Pro</button>
            <button class="tab-btn" id="tab-labs" role="tab" aria-selected="false" aria-controls="settings-labs">Labs</button>
            <button class="tab-btn" id="tab-profile" role="tab" aria-selected="false" aria-controls="settings-profile">„Éó„É≠„Éï„Ç£„Éº„É´</button>
            <button class="tab-btn" id="tab-projects" role="tab" aria-selected="false" aria-controls="settings-projects">„Éó„É≠„Ç∏„Çß„ÇØ„Éà</button>
            <button class="tab-btn" id="tab-audio" role="tab" aria-selected="false" aria-controls="settings-audio">Èü≥Â£∞</button>
            <button class="tab-btn" id="tab-achievements" role="tab" aria-selected="false" aria-controls="settings-achievements">ÂÆüÁ∏æ</button>
            <button class="tab-btn" id="tab-export" role="tab" aria-selected="false" aria-controls="settings-export">„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
            <button class="tab-btn" id="tab-data" role="tab" aria-selected="false" aria-controls="settings-data">„Éá„Éº„ÇøÁÆ°ÁêÜ</button>
          </nav>
          <!-- Safety Section -->
          <div class="settings-section" id="settings-safety" role="tabpanel" aria-labelledby="tab-safety">
            <div class="section-header">
              <div class="section-icon">üõ°Ô∏è</div>
              <div class="section-info">
                <h3>„Çª„Éº„Éï„ÉÜ„Ç£ / „Éà„Éº„É≥</h3>
                <p>System Prompt „Å® Emotion Guard „ÅÆË™øÊï¥</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <label for="systemPromptInput" class="field-label">
                  <span class="label-text">System Prompt</span>
                  <span class="label-description">AI„ÅÆÊåØ„ÇãËàû„ÅÑ„ÇíÂÆöÁæ©ÔºàÁ©∫Ê¨ÑÂèØ„ÄÅ‰øùÂ≠òÊôÇ„Å´Ëá™Âãï„ÉÅ„Çß„ÉÉ„ÇØÔºâ</span>
                </label>
                <textarea id="systemPromptInput" rows="5" class="enhanced-select" placeholder="‰æã: „ÅÇ„Å™„Åü„ÅØÁ§ºÂÑÄÊ≠£„Åó„Åè„ÄÅÊ†πÊã†„ÇíÁ∞°ÊΩî„Å´Á§∫„Åó„Å¶ÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"></textarea>
                <div id="systemPromptWarning" style="font-size:12px; color: var(--warning, #b45309); display:none; margin-top:6px;">‰∏çÊ≠£„Å™ÂÜÖÂÆπ„ÅåÊ§úÂá∫„Åï„Çå„Åæ„Åó„Åü„ÄÇ‰øùÂ≠ò„Åß„Åç„Åæ„Åõ„Çì„ÄÇ</div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label">
                  <span class="label-text">Emotion Guard‚Ñ¢</span>
                  <span class="label-description">Âè£Ë™ø„ÉªÂøúÁ≠î„Éà„Éº„É≥„ÅÆËá™Âãï/ÊâãÂãïË™øÊï¥ÔºàUI„Å´ÂèçÊò†Ôºâ</span>
                </label>
                <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                  <label style="display:flex; gap:6px; align-items:center;">
                    <input type="radio" name="emotionMode" id="emotionModeOff" value="off" />
                    Off
                  </label>
                  <label style="display:flex; gap:6px; align-items:center;">
                    <input type="radio" name="emotionMode" id="emotionModeAuto" value="auto" />
                    AutoÔºàÂÖ•Âäõ„Åã„ÇâÊ§úÂá∫Ôºâ
                  </label>
                  <label style="display:flex; gap:6px; align-items:center;">
                    <input type="radio" name="emotionMode" id="emotionModeManual" value="manual" />
                    Manual
                  </label>
                  <div class="custom-select-wrapper">
                    <select id="emotionStyleSelect" class="enhanced-select" title="„Éà„Éº„É≥„ÇíÈÅ∏Êäû">
                      <option value="neutral">NeutralÔºà‰∏≠Á´ã„ÉªÁ∞°ÊΩîÔºâ</option>
                      <option value="empathetic">EmpatheticÔºàÂÖ±ÊÑüÁöÑÔºâ</option>
                      <option value="cheerful">CheerfulÔºàÂâçÂêë„ÅçÔºâ</option>
                      <option value="professional">ProfessionalÔºàËêΩ„Å°ÁùÄ„ÅÑ„ÅüÂ∞ÇÈñÄË™øÔºâ</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Appearance Section -->
          <div class="settings-section" id="settings-appearance" role="tabpanel" aria-labelledby="tab-appearance">
            <div class="section-header">
              <div class="section-icon">üé®</div>
              <div class="section-info">
                <h3>Â§ñË¶≥</h3>
                <p>„ÉÜ„Éº„Éû„Å®„É¨„Ç§„Ç¢„Ç¶„Éà„ÅÆË®≠ÂÆö</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <label for="themeSelect" class="field-label">
                  <span class="label-text">„ÉÜ„Éº„Éû</span>
                  <span class="label-description">„Ç¢„Éó„É™„ÅÆË¶ã„ÅüÁõÆ„ÇíÈÅ∏Êäû</span>
                </label>
                <div class="custom-select-wrapper">
                  <select id="themeSelect" class="enhanced-select">
                    <option value="system">„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö„Å´Âæì„ÅÜ</option>
                    <option value="light">„É©„Ç§„Éà</option>
                    <option value="dark">„ÉÄ„Éº„ÇØ</option>
                  </select>
                </div>
              </div>
              <div class="field enhanced-field">
                <label class="field-label" for="simpleModeToggle">
                  <span class="label-text">„Ç∑„É≥„Éó„É´„É¢„Éº„Éâ</span>
                  <span class="label-description">„Éï„É©„ÉÉ„Éà„Åß„Éü„Éã„Éû„É´„Å™UIÔºàChat„Ç¢„Éó„É™È¢®„ÅÆËêΩ„Å°ÁùÄ„ÅÑ„ÅüÂ§ñË¶≥Ôºâ</span>
                </label>
                <div>
                  <input id="simpleModeToggle" type="checkbox" class="toggle" />
                </div>
              </div>
              <div class="field enhanced-field">
                <label for="densitySelect" class="field-label">
                  <span class="label-text">ÂØÜÂ∫¶</span>
                  <span class="label-description">„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÈñìÈöî„ÇíË™øÊï¥Ôºà„Ç≥„É≥„Éë„ÇØ„Éà/„ÇÜ„Å£„Åü„ÇäÔºâ</span>
                </label>
                <div class="custom-select-wrapper">
                  <select id="densitySelect" class="enhanced-select">
                    <option value="comfortable">„ÇÜ„Å£„Åü„Çä</option>
                    <option value="compact">„Ç≥„É≥„Éë„ÇØ„Éà</option>
                  </select>
                </div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="contrastToggle">
                  <span class="label-text">È´ò„Ç≥„É≥„Éà„É©„Çπ„Éà</span>
                  <span class="label-description">Â¢ÉÁïå„ÇÑ„ÉÜ„Ç≠„Çπ„Éà„ÅÆ„Ç≥„É≥„Éà„É©„Çπ„Éà„ÇíÂº∑Ë™øÔºà„Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£Âêë‰∏äÔºâ</span>
                </label>
                <div>
                  <input id="contrastToggle" type="checkbox" class="toggle" />
                </div>
              </div>
              
              <div class="field enhanced-field">
                <label for="widthRange" class="field-label">
                  <span class="label-text">„É°„ÉÉ„Çª„Éº„Ç∏ÂπÖ</span>
                  <span class="label-description">„ÉÅ„É£„ÉÉ„Éà„Ç®„É™„Ç¢„ÅÆÂπÖ„ÇíË™øÊï¥</span>
                </label>
                <div class="range-wrapper">
                  <input type="range" id="widthRange" class="enhanced-range" min="600" max="1100" step="20" value="840" />
                  <div class="range-value">
                    <span id="widthValue">840</span>px
                  </div>
                </div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="asobiToggle">
                  <span class="label-text">Asobi Mode</span>
                  <span class="label-description">Êó•Êõø„Çè„Çä„ÉÜ„Éº„Éû„Å®ÂÆüÁ∏æ„Éê„ÉÉ„Ç∏„Åß„Å°„Çá„Å£„Å®ÈÅä„Å≥ÂøÉ„Çí</span>
                </label>
                <div>
                  <input id="asobiToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="glassToggle">
                  <span class="label-text">Liquid Glass „É¢„Éº„Éâ</span>
                  <span class="label-description">iOS / visionOS È¢®„ÅÆÂçäÈÄèÊòé„Éª„Ç¨„É©„ÇπË™øUIÔºàÂÆüÈ®ìÁöÑ / Êó¢ÂÆö„ÅØ„Ç™„ÉïÔºâ</span>
                </label>
                <div>
                  <input id="glassToggle" type="checkbox" class="toggle" />
                </div>
              </div>
            </div>
          </div>

          <!-- Pro Section -->
          <div class="settings-section" id="settings-pro" role="tabpanel" aria-labelledby="tab-pro">
            <div class="section-header">
              <div class="section-icon">üíé</div>
              <div class="section-info">
                <h3>Lumora ProÔºö‰ΩøÁî®„É¢„Éá„É´„ÅÆÈÅ∏Êäû</h3>
                <p>„É¢„Éá„É´„Çª„É¨„ÇØ„Çø„Éº„Åß„ÄåLumora Pro (Multi)„Äç„ÇíÈÅ∏„Å∂„Å®„ÄÅ„Åì„Åì„ÅßÈÅ∏Êäû„Åó„Åü„É¢„Éá„É´ÔºàÊúÄÂ§ß4Ôºâ„ÅßÂêåÊôÇÂõûÁ≠î„Åó„Åæ„Åô</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <label class="field-label">
                  <span class="label-text">‰ΩøÁî®„É¢„Éá„É´„ÅÆÈÅ∏ÊäûÔºàÊúÄÂ§ß4Ôºâ</span>
                  <span class="label-description">Lumora ÂÜÖ„ÅÆ„Åô„Åπ„Å¶„ÅÆ„É¢„Éá„É´„Åã„ÇâÈÅ∏ÊäûÂèØËÉΩ</span>
                </label>
                <div id="proModelList" class="pro-model-list" aria-live="polite"></div>
                <div id="proModelCount" style="font-size:12px; opacity:.7; margin-top:6px;">0 / 4 ÈÅ∏Êäû‰∏≠</div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="proIntegrateSelect">
                  <span class="label-text">Áµ±Âêà„É¢„Éá„É´</span>
                  <span class="label-description">ÂêÑ„É¢„Éá„É´„ÅÆÂõûÁ≠î„ÇíÁµ±Âêà„Åô„ÇãÈöõ„Å´‰ΩøÁî®ÔºàÂÖ®„É¢„Éá„É´„Åã„ÇâÈÅ∏ÊäûÂèØÔºâ</span>
                </label>
                <div class="custom-select-wrapper">
                  <select id="proIntegrateSelect" class="enhanced-select"></select>
                </div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="proEvoToggle">
                  <span class="label-text">Ëá™Â∑±ÊîπËâØ„É´„Éº„ÉóÔºàLumora Pro ModeÔºâ</span>
                  <span class="label-description">4„É¢„Éá„É´ÂøúÁ≠î ‚Üí NanoÁµ±Âêà ‚Üí ÊîπÂñÑ„É´„Éº„ÉóÔºàON„ÅßÈÄèÊòéÊÄß„É≠„Ç∞„ÇíË°®Á§∫ÂèØÔºâ</span>
                </label>
                <div>
                  <input id="proEvoToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="proEvoRoundsSelect">
                  <span class="label-text">ÊîπËâØÂõûÊï∞</span>
                  <span class="label-description">Ëá™Âãï/1/2/4 Âõû„ÄÇÂ§ö„ÅÑ„Åª„Å©ÂìÅË≥™Âêë‰∏ä„Åó„ÇÑ„Åô„ÅÑÔºàÈÅÖ„Åè„Å™„Çä„Åæ„ÅôÔºâ</span>
                </label>
                <div class="custom-select-wrapper">
                  <select id="proEvoRoundsSelect" class="enhanced-select">
                    <option value="auto">Ëá™Âãï</option>
                    <option value="1">1Âõû</option>
                    <option value="2">2Âõû</option>
                    <option value="4">4Âõû</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Experiments Section -->
          <div class="settings-section" id="settings-experiments" role="tabpanel" aria-labelledby="tab-experiments">
            <div class="section-header">
              <div class="section-icon">üß™</div>
              <div class="section-info">
                <h3>ÂÆüÈ®ìÁöÑÊ©üËÉΩ</h3>
                <p>Êñ∞„Åó„ÅÑUI/UXÊîπÂñÑ„ÇíÊÆµÈöéÁöÑ„Å´ÊúâÂäπÂåñ</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <label class="field-label" for="newUiToggle">
                  <span class="label-text">Êñ∞UI/UX„ÇíÊúâÂäπÂåñ</span>
                  <span class="label-description">Ë¶ñË™çÊÄß„ÉªÊìç‰ΩúÊÄß„ÅÆÂêë‰∏äÔºà„Éï„Ç©„Éº„Ç´„Çπ„É™„É≥„Ç∞/„Çπ„ÇØ„É≠„Éº„É´/„Çø„Ç§„Éù„Å™„Å©Ôºâ</span>
                </label>
                <div>
                  <input id="newUiToggle" type="checkbox" class="toggle" />
                </div>
              </div>
              <div class="field enhanced-field">
                <label class="field-label" for="fiiToggle">
                  <span class="label-text">Fluid Intelligence Interface (FII)</span>
                  <span class="label-description">ÈùûÁ∑öÂΩ¢„ÅÆÁü•ÁöÑ„Ç∞„É©„ÉïUIÔºàÂÆüÈ®ì„ÉªÊó¢ÂÆö„ÅØ„Ç™„ÉïÔºâ</span>
                </label>
                <div>
                  <input id="fiiToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <div class="field enhanced-field">
                <label class="field-label" for="rviToggle">
                  <span class="label-text">Realtime Visual Intelligence (RVI)</span>
                  <span class="label-description">ÂøúÁ≠î„Åã„ÇâË¶ñË¶ö„Éñ„É≠„ÉÉ„ÇØÔºàË¶ÅÁÇπ/ÊØîËºÉ/ÊâãÈ†Ü „Å™„Å©Ôºâ„ÇíÊäΩÂá∫„Åó„Å¶Ë°®Á§∫ÔºàÂÆüÈ®ì„ÉªÊó¢ÂÆö„ÅØ„Ç™„É≥Ôºâ</span>
                </label>
                <div>
                  <input id="rviToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <!-- RVI Test Area -->
              <div class="field enhanced-field" id="rviTestField">
                <label class="field-label" for="rviTestInput">
                  <span class="label-text">RVI „ÉÜ„Çπ„Éà</span>
                  <span class="label-description">‰∏ã„ÅÆÂÖ•Âäõ„Å´ RVI JSON „Éñ„É≠„ÉÉ„ÇØÔºà„ÄêRVI-JSON„Äë...„Äê/RVI-JSON„Äë „ÇÑ ```rvi-json ... ```Ôºâ„Åæ„Åü„ÅØ RVI „Çø„Ç∞Ôºà‰æã: [rviKeypoints]Ôºâ„ÇíÂê´„ÇÄ„ÉÜ„Ç≠„Çπ„Éà„ÇíË≤º„Çä„ÄÅËß£Êûê/„Éó„É¨„Éì„É•„Éº„ÇíÊäº„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</span>
                </label>
                <textarea id="rviTestInput" rows="6" class="enhanced-select" placeholder="‰æã: \n„ÄêRVI-JSON„Äë{\n  \"type\": \"keypoints\", \n  \"payload\": { \n    \"title\": \"Ë¶ÅÁÇπ\", \n    \"items\": [\"‰∏Ä„Å§ÁõÆ\", \"‰∫å„Å§ÁõÆ\"] \n  }\n}„Äê/RVI-JSON„Äë\n\n„Åæ„Åü„ÅØ: [rviKeypoints title='ToDo']\n- ‰ªïÊßò„ÇíÁ¢∫Ë™ç\n- UI„ÇíÂÆüË£Ö\n[/rviKeypoints]"></textarea>
                <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;">
                  <button id="rviTestSampleJsonBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´(JSON)</button>
                  <button id="rviTestSampleTagBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´(„Çø„Ç∞)</button>
                  <button id="rviDemoKeypointsBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: Ë¶ÅÁÇπ</button>
                  <button id="rviDemoStepsBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: ÊâãÈ†Ü</button>
                  <button id="rviDemoChecklistBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: „ÉÅ„Çß„ÉÉ„ÇØ</button>
                  <button id="rviDemoTimelineBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: „Çø„Ç§„É†„É©„Ç§„É≥</button>
                  <button id="rviDemoComparisonBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: ÊØîËºÉ</button>
                  <button id="rviDemoTradeoffsBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: „Éà„É¨„Éº„Éâ„Ç™„Éï</button>
                  <button id="rviDemoCauseEffectBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: Âõ†ÊûúÈñ¢‰øÇ</button>
                  <button id="rviDemoMetricsBtn" class="secondary-btn" type="button">„Çµ„É≥„Éó„É´: ÊåáÊ®ô</button>
                  <button id="rviTestParseBtn" class="primary-btn" type="button">Ëß£Êûê/„Éó„É¨„Éì„É•„Éº</button>
                  <button id="rviTestClearBtn" class="secondary-btn" type="button">„ÇØ„É™„Ç¢</button>
                </div>
                <div id="rviTestHost" class="rvi-test-host" style="margin-top:12px;">
                  <!-- Mimic a message bubble host for RVI insertion -->
                  <div class="bubble-main" id="rviTestBubbleHost">
                    <div class="content markdown" id="rviTestContent"></div>
                    <div class="meta" id="rviTestMeta">„ÉÜ„Çπ„Éà„Éó„É¨„Éì„É•„Éº</div>
                  </div>
                </div>
              </div>

              <div class="divider"></div>

              <!-- Micro-Pause Insight (Experimental) -->
              <div class="field enhanced-field">
                <label class="field-label" for="microPauseToggle">
                  <span class="label-text">Micro-Pause Insight‚Ñ¢ÔºàÂÆüÈ®ìÔºâ</span>
                  <span class="label-description">ÂÖ•Âäõ„ÅÆÁü≠„ÅÑ‰∏ÄÊôÇÂÅúÊ≠¢Ôºà500ms„Äú2sÔºâ„ÅßËá™ÁÑ∂„Å™Á∂ö„ÅçÂÄôË£ú„Çí2„Äú3‰ª∂ÊèêÁ§∫„ÄÇ„ÇØ„É™„ÉÉ„ÇØ„ÅßÊåøÂÖ•„ÄÅÁÑ°Ë¶ñÂèØ</span>
                </label>
                <div>
                  <input id="microPauseToggle" type="checkbox" class="toggle" />
                </div>
              </div>
              <div class="field-note" style="font-size:12px; color: var(--warning, #b45309); margin: 6px 0 0 2px;">
                Ê≥®ÊÑè: Micro-Pause Insight‚Ñ¢„ÅØÂÆüÈ®ì‰∏≠„ÅÆÊ©üËÉΩ„Åß„Åô„ÄÇÁí∞Â¢É„ÇÑÊ∑∑ÈõëÁä∂Ê≥Å„ÄÅ„É¢„Éá„É´„ÅÆÂøúÁ≠îÊÄß„Å´„Çà„Çä„ÄåÂãï‰Ωú„Åó„Å™„ÅÑÔºèÂÄôË£ú„ÅåÂá∫„Å™„ÅÑ„Äç„Åì„Å®„ÅåÈùûÂ∏∏„Å´Â§ö„Åè„ÅÇ„Çä„Åæ„Åô„ÄÇ‰ªäÂæå„ÅÆ„Ç¢„ÉÉ„Éó„Éá„Éº„Éà„ÅßÂÆâÂÆöÊÄß„ÇíÊîπÂñÑ‰∫àÂÆö„Åß„Åô„ÄÇ
              </div>
              <div class="field enhanced-field">
                <label class="field-label" for="microPauseModelSelect">
                  <span class="label-text">Micro-Pause Áî®„É¢„Éá„É´</span>
                  <span class="label-description">‰Ωé„Ç≥„Çπ„Éà„ÅÆËªΩÈáè„É¢„Éá„É´„Çí‰ΩøÁî®</span>
                </label>
                <div class="custom-select-wrapper">
                  <select id="microPauseModelSelect" class="enhanced-select">
                    <option value="lfm-7b">LFM-7BÔºàËªΩÈáè„ÉªÈ´òÈÄüÔºâ</option>
                    <option value="hunyuan-a13b-instruct">Hunyuan-A13B Instruct</option>
                    <option value="google/gemma-3n-e4b-it">Gemma 3N e4B ITÔºàFreeÔºâ</option>
                  </select>
                </div>
              </div>

              <div class="divider"></div>

              <!-- Lumora Canvas Settings (Experimental) -->
              <div class="field enhanced-field">
                <label class="field-label" for="canvasSettingsEnable">
                  <span class="label-text">Lumora Canvas‚Ñ¢</span>
                  <span class="label-description">AI „ÅåÁîüÊàê„Åó„Åü HTML / Markdown / Text „ÇíÁ∑®ÈõÜ„Éª„Éó„É¨„Éì„É•„ÉºÔºà„Ç≥„Éº„É´„Ç¢„Ç¶„ÉàË°®Á§∫„Å®Ëá™ÂãïËµ∑ÂãïÔºâ</span>
                </label>
                <div style="display:flex; flex-direction:column; gap:10px;">
                  <label class="menu-check" style="display:flex; align-items:center; gap:8px;">
                    <input type="checkbox" id="canvasSettingsEnable" />
                    <span>Canvas Ê©üËÉΩ„ÇíÊúâÂäπ„Å´„Åô„Çã</span>
                  </label>
                  <div class="menu-radio-group" id="canvasSettingsModeGroup" style="display:flex; gap:14px; flex-wrap:wrap;">
                    <label><input type="radio" name="canvasSettingsMode" id="canvasSettingsModeAuto" value="auto" /> Ëá™ÂãïË°®Á§∫</label>
                    <label><input type="radio" name="canvasSettingsMode" id="canvasSettingsModeManual" value="manual" /> ÊâãÂãïË°®Á§∫</label>
                    <label><input type="radio" name="canvasSettingsMode" id="canvasSettingsModeOff" value="off" /> ÁÑ°ÂäπÂåñ</label>
                  </div>
                  <div style="display:flex; gap:8px; flex-wrap:wrap;">
                    <button id="canvasTestHtml" class="secondary-btn">Canvas „Çí„ÉÜ„Çπ„ÉàÔºàHTMLÔºâ</button>
                    <button id="canvasTestMarkdown" class="secondary-btn">Canvas „Çí„ÉÜ„Çπ„ÉàÔºàMarkdownÔºâ</button>
                    <button id="canvasTestText" class="secondary-btn">Canvas „Çí„ÉÜ„Çπ„ÉàÔºàTextÔºâ</button>
                  </div>
                  <div class="field-note" style="font-size:12px; opacity:.7;">
                    Ëá™ÂãïË°®Á§∫„ÅØ„ÄÅAIÂøúÁ≠î„Å´ <code>[[canvasCallHtmlSite]]...[[/canvasCallHtmlSite]]</code> „Å™„Å©„ÅÆ„Éá„Ç£„É¨„ÇØ„ÉÜ„Ç£„Éñ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„Å´Áô∫ÁÅ´„Åó„Åæ„Åô„ÄÇ
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Labs Section (Beta/Alpha/Research) -->
          <div class="settings-section" id="settings-labs" role="tabpanel" aria-labelledby="tab-labs">
            <div class="section-header">
              <div class="section-icon">üî¨</div>
              <div class="section-info">
                <h3>Labs</h3>
                <p>Beta/Alpha/Research Preview „ÅÆÊ©üËÉΩÁÆ°ÁêÜ</p>
              </div>
            </div>
            <div class="section-content">
              <!-- Category toggles -->
              <div class="field enhanced-field">
                <label class="field-label" for="labsBetaToggle">
                  <span class="label-text">Beta Ê©üËÉΩ</span>
                  <span class="label-description">ÂÆâÂÆöÁâà„Å´Ëøë„ÅÑÊñ∞Ê©üËÉΩ„ÄÇUI/UX Âêë‰∏ä„Çí‰∏≠ÂøÉ„Å´Êèê‰æõ</span>
                </label>
                <div>
                  <input id="labsBetaToggle" type="checkbox" class="toggle" />
                </div>
              </div>
              <div class="field enhanced-field">
                <label class="field-label" for="labsAlphaToggle">
                  <span class="label-text">Alpha Ê©üËÉΩ</span>
                  <span class="label-description">Âãï‰Ωú„Åå‰∏çÂÆâÂÆö„Å™ÂèØËÉΩÊÄß„ÅÆ„ÅÇ„ÇãÊó©Êúü„Éó„É¨„Éì„É•„Éº</span>
                </label>
                <div>
                  <input id="labsAlphaToggle" type="checkbox" class="toggle" />
                </div>
              </div>
              <div class="field enhanced-field">
                <label class="field-label" for="labsResearchToggle">
                  <span class="label-text">Research Preview</span>
                  <span class="label-description">Á†îÁ©∂ÁõÆÁöÑ„ÅÆË©¶È®ìÁöÑÊ©üËÉΩÔºàÊåôÂãïÂ§âÊõ¥„ÅÆÂèØËÉΩÊÄß„ÅÇ„ÇäÔºâ</span>
                </label>
                <div>
                  <input id="labsResearchToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <div class="divider"></div>

              <!-- Beta features -->
              <div class="field enhanced-field" data-labs-scope="beta">
                <label class="field-label" for="emotionUiToggle">
                  <span class="label-text">Emotion Adaptive UIÔºàBetaÔºâ</span>
                  <span class="label-description">ÂØæË©±„ÅÆÊÑüÊÉÖ„Å´Âêà„Çè„Åõ„Å¶UI„Éà„Éº„É≥„ÇíËá™ÂãïË™øÊï¥ÔºàËêΩ„Å°ÁùÄ„Åç/ÂÖ±ÊÑü/ÂâçÂêë„Åç/„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´Ôºâ„ÄÇEmotion Guard„ÅÆË®≠ÂÆö„Å´ÈÄ£Âãï</span>
                </label>
                <div>
                  <input id="emotionUiToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <div class="field enhanced-field" data-labs-scope="beta">
                <label class="field-label" for="trustLayerToggle">
                  <span class="label-text">Trust & Transparency LayerÔºàBetaÔºâ</span>
                  <span class="label-description">ÂøúÁ≠î„Åî„Å®„Å´„Äå‰ΩøÁî®„É¢„Éá„É´„Äç„Å®„Äå‰ø°È†ºÂ∫¶„Äç„ÇíËá™ÁÑ∂Ë°®Á§∫„ÄÇLumora Auto „É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Å´„ÇÇÂØæÂøú</span>
                </label>
                <div>
                  <input id="trustLayerToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <div class="field enhanced-field" data-labs-scope="beta">
                <label class="field-label" for="confidenceToggle">
                  <span class="label-text">‰ø°È†ºÂ∫¶„ÇíÊï∞ÂÄ§„ÅßË°®Á§∫</span>
                  <span class="label-description">Confidence „Çí„Éë„Éº„Çª„É≥„ÉàË°®Ë®ò„Åß„É°„ÇøÊÉÖÂ†±„Å´Ë°®Á§∫ÔºàTrust Layer „ÅåÊúâÂäπ„Å™Â†¥ÂêàÔºâ</span>
                </label>
                <div>
                  <input id="confidenceToggle" type="checkbox" class="toggle" />
                </div>
              </div>

              <!-- Alpha/Research placeholders for future -->
              <div class="field enhanced-field" data-labs-scope="alpha" style="opacity:.8;">
                <label class="field-label">
                  <span class="label-text">Â∞ÜÊù•„ÅÆ Alpha Ê©üËÉΩ</span>
                  <span class="label-description">‰ªäÂæå„ÅÆÊõ¥Êñ∞„ÅßÊèê‰æõ‰∫àÂÆö„Åß„Åô</span>
                </label>
              </div>
              <div class="field enhanced-field" data-labs-scope="research" style="opacity:.8;">
                <label class="field-label">
                  <span class="label-text">Â∞ÜÊù•„ÅÆ Research Preview</span>
                  <span class="label-description">‰ªäÂæå„ÅÆÊõ¥Êñ∞„ÅßÊèê‰æõ‰∫àÂÆö„Åß„Åô</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Profile Section -->
          <div class="settings-section" id="settings-profile" role="tabpanel" aria-labelledby="tab-profile">
            <div class="section-header">
              <div class="section-icon">üë§</div>
              <div class="section-info">
                <h3>„Éó„É≠„Éï„Ç£„Éº„É´</h3>
                <p>„É¶„Éº„Ç∂„Éº„Éç„Éº„É†„Å®ÁîªÂÉè„ÇíË®≠ÂÆö</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <label for="usernameInput" class="field-label">
                  <span class="label-text">„É¶„Éº„Ç∂„Éº„Éç„Éº„É†</span>
                  <span class="label-description">„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆË°®Á§∫„Å™„Å©„Å´‰ΩøÁî®</span>
                </label>
                <input id="usernameInput" type="text" placeholder="‰æã: Taro" class="enhanced-select" />
              </div>
              <div class="field enhanced-field">
                <label for="userImageInput" class="field-label">
                  <span class="label-text">„É¶„Éº„Ç∂„ÉºÁîªÂÉè</span>
                  <span class="label-description">PNG/JPEGÔºàÊ≠£ÊñπÂΩ¢Êé®Â•®Ôºâ</span>
                </label>
                <input id="userImageInput" type="file" accept="image/*" />
                <div style="display:flex; align-items:center; gap:12px;">
                  <img id="userImagePreview" alt="„Éó„É¨„Éì„É•„Éº" style="width:48px; height:48px; border-radius:50%; border:1px solid var(--border); object-fit:cover; display:none;" />
                  <span id="userImageName" style="font-size:12px; opacity:.7;"></span>
                </div>
              </div>
          </div>
        </div>

          <!-- Projects Section (per-project defaults) -->
          <div class="settings-section" id="settings-projects" role="tabpanel" aria-labelledby="tab-projects">
            <div class="section-header">
              <div class="section-icon">üóÇÔ∏è</div>
              <div class="section-info">
                <h3>„Éó„É≠„Ç∏„Çß„ÇØ„Éà</h3>
                <p>„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åî„Å®„ÅÆÊó¢ÂÆöË®≠ÂÆö</p>
              </div>
            </div>
            <div class="section-content">
              <div id="projectManager"></div>
            </div>
          </div>

          <!-- Audio Section -->
          <div class="settings-section" id="settings-audio" role="tabpanel" aria-labelledby="tab-audio">
            <div class="section-header">
              <div class="section-icon">üîä</div>
              <div class="section-info">
                <h3>Èü≥Â£∞</h3>
                <p>Ë™≠„Åø‰∏ä„Åí„ÅÆÂ£∞„Å®ÈÄüÂ∫¶„ÇíË®≠ÂÆö</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <label for="ttsVoiceSelect" class="field-label">
                  <span class="label-text">Â£∞„ÅÆÁ®ÆÈ°û</span>
                  <span class="label-description">„Éñ„É©„Ç¶„Ç∂Êèê‰æõ„ÅÆÈü≥Â£∞„Çí‰ΩøÁî®</span>
                </label>
                <div class="custom-select-wrapper">
                  <select id="ttsVoiceSelect" class="enhanced-select"></select>
                </div>
              </div>
              <div class="field enhanced-field">
                <label for="ttsRateRange" class="field-label">
                  <span class="label-text">Ë™≠„Åø‰∏ä„ÅíÈÄüÂ∫¶</span>
                  <span class="label-description">0.5„Äú1.5ÔºàÊ®ôÊ∫ñ„ÅØ1.0Ôºâ</span>
                </label>
                <div class="range-wrapper">
                  <input type="range" id="ttsRateRange" class="enhanced-range" min="0.5" max="1.5" step="0.1" value="1" />
                  <div class="range-value"><span id="ttsRateValue">1.0</span>x</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Achievements (Asobi) -->
          <div class="settings-section" id="settings-achievements" role="tabpanel" aria-labelledby="tab-achievements">
            <div class="section-header">
              <div class="section-icon">üèÖ</div>
              <div class="section-info">
                <h3>ÂÆüÁ∏æÔºàAsobiÔºâ</h3>
                <p>ÈÅä„Å≥ÂøÉ„ÅÆ„Éê„ÉÉ„Ç∏„ÇíÈõÜ„ÇÅ„Åæ„Åó„Çá„ÅÜ</p>
              </div>
            </div>
            <div class="section-content">
              <div id="achievements" class="achievements" aria-live="polite"></div>
            </div>
          </div>

          <!-- Export/Import Section -->
          <div class="settings-section" id="settings-export" role="tabpanel" aria-labelledby="tab-export">
            <div class="section-header">
              <div class="section-icon">üì§</div>
              <div class="section-info">
                <h3>„Ç®„ÇØ„Çπ„Éù„Éº„Éà / „Ç§„É≥„Éù„Éº„Éà</h3>
                <p>‰ºöË©±„Éá„Éº„Çø„Çí„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÉªÂæ©ÂÖÉ</p>
              </div>
            </div>
            <div class="section-content">
              <div class="field enhanced-field">
                <div style="display:flex; gap:8px; flex-wrap:wrap;">
                  <button id="exportCurrentBtn" class="secondary-btn">ÁèæÂú®„ÅÆ‰ºöË©±„Çí„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºàJSONÔºâ</button>
                  <button id="exportCurrentMdBtn" class="secondary-btn">ÁèæÂú®„ÅÆ‰ºöË©±„Çí„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºàMarkdownÔºâ</button>
                  <button id="exportAllBtn" class="secondary-btn">ÂÖ®‰ºöË©±„Çí„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºàJSONÔºâ</button>
                  <button id="importBtn" class="primary-btn">„Ç§„É≥„Éù„Éº„ÉàÔºàJSONÔºâ</button>
                </div>
                <input id="importFileInput" type="file" accept="application/json" hidden />
              </div>
            </div>
          </div>

          <!-- Data Management Section -->
          <div class="settings-section danger-section" id="settings-data" role="tabpanel" aria-labelledby="tab-data">
            <div class="section-header">
              <div class="section-icon">üóëÔ∏è</div>
              <div class="section-info">
                <h3>„Éá„Éº„ÇøÁÆ°ÁêÜ</h3>
                <p>‰ºöË©±Â±•Ê≠¥„ÅÆÂâäÈô§„Å®ÁÆ°ÁêÜ</p>
              </div>
            </div>
            <div class="section-content">
              <div class="danger-actions">
                <button id="deleteCurrentBtn" class="enhanced-danger-btn">
                  <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                  </svg>
                  „Åì„ÅÆ‰ºöË©±„ÇíÂâäÈô§
                </button>
                <button id="deleteAllBtn" class="enhanced-danger-btn critical">
                  <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M15 4V3c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v1H5c-.55 0-1 .45-1 1s.45 1 1 1h1v13c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6h1c.55 0 1-.45 1-1s-.45-1-1-1h-4zM11 3h2v1h-2V3zm6 3v13H7V6h10z"/>
                  </svg>
                  ÂÖ®Â±•Ê≠¥„ÇíÂâäÈô§
                </button>
              </div>
              <div class="warning-text">
                <p>‚ö†Ô∏è ÂâäÈô§„Åï„Çå„Åü‰ºöË©±„ÅØÂæ©ÂÖÉ„Åß„Åç„Åæ„Åõ„Çì</p>
              </div>
            </div>
          </div>
        </div>

        
        
        <footer class="modal-footer enhanced-footer">
          <div class="footer-actions">
            <button id="settingsCancel" class="secondary-btn">„Ç≠„É£„É≥„Çª„É´</button>
            <button id="settingsSave" class="enhanced-save-btn">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
              Ë®≠ÂÆö„Çí‰øùÂ≠ò
            </button>
          </div>
        </footer>
      </div>
    </div>

    <script type="module" src="./src/app/main.js"></script>
  </body>
  </html>
